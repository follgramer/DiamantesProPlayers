<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Club de Recompensas</title>

    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&display=swap" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
        /* Variables CSS para colores y tipografía */
        :root {
            --primary-bg: #0A0F14;
            --secondary-bg: #161B22;
            --container-bg: #1F2937;
            --accent-color: #00A8FF;
            --text-color: #E6EDF3;
            --text-muted: #9CA3AF;
            --gold-accent: #FFD700;
            --green-accent: #2ecc71;
            --purple-accent: #8B5CF6;
            --pass-color: #F97316;
            --danger-color: #e74c3c;
            --font-main: 'Montserrat', sans-serif;

            /* Tamaños de texto estandarizados */
            --text-xs: 0.75rem;
            --text-sm: 0.875rem;
            --text-base: 1rem;
            --text-lg: 1.125rem;
            --text-xl: 1.25rem;
            --text-2xl: 1.5rem;
        }

        /* ESTILOS GENERALES */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-main);
            color: var(--text-color);
            background-color: var(--primary-bg);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            font-size: var(--text-base);
        }

        /* HEADER FIJO */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 60px;
            background-color: var(--secondary-bg);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.5);
            z-index: 1000;
            border-bottom: 1px solid #374151;
        }

        .header-title {
            font-weight: 800;
            font-size: var(--text-xl);
            color: var(--accent-color);
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
            flex: 1;
        }

        /* BOTÓN HAMBURGUESA */
        .hamburger-menu {
            position: absolute !important;
            top: 50% !important;
            right: 20px !important;
            transform: translateY(-50%) !important;
            font-size: 28px !important;
            cursor: pointer !important;
            user-select: none !important;
            padding: 8px !important;
            background: none !important;
            border: none !important;
            color: var(--text-color) !important;
            border-radius: 4px !important;
            z-index: 1001 !important;
            width: 44px !important;
            height: 44px !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            transition: none !important;
            animation: none !important;
        }

        .hamburger-menu:hover {
            color: var(--accent-color) !important;
            background-color: rgba(0, 168, 255, 0.1) !important;
            transform: translateY(-50%) !important;
            transition: none !important;
            animation: none !important;
        }

        /* MENÚ LATERAL MEJORADO */
        .nav-menu {
            position: fixed;
            top: 0;
            left: -280px;
            width: 280px;
            height: 100vh;
            background: linear-gradient(145deg, var(--secondary-bg) 0%, #1a1f26 100%);
            box-shadow: 5px 0 30px rgba(0,0,0,0.8);
            transition: left 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1002;
            display: flex;
            flex-direction: column;
            border-right: 2px solid var(--accent-color);
        }

        .nav-menu.active { left: 0; }

        /* HEADER DEL MENÚ MEJORADO */
        .nav-header {
            padding: 20px 15px;
            background: linear-gradient(135deg, var(--accent-color), var(--purple-accent));
            color: white;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0, 168, 255, 0.2);
        }

        .nav-header h3 {
            font-size: var(--text-lg);
            font-weight: 700;
            margin: 0 0 5px 0;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }

        .nav-header p {
            font-size: var(--text-sm);
            margin: 0;
            opacity: 0.95;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 400;
        }

        /* CONTENIDO PRINCIPAL DEL MENÚ */
        .nav-content {
            flex: 1;
            padding: 15px 0;
            overflow-y: auto;
        }

        .nav-menu ul {
            list-style: none;
            padding: 0 12px;
            margin: 0;
        }

        .nav-menu li {
            margin-bottom: 6px;
        }

        .nav-menu li a {
            display: flex;
            align-items: center;
            color: var(--text-color);
            text-decoration: none;
            padding: 14px 15px;
            font-size: var(--text-base);
            font-weight: 600;
            border-radius: 8px;
            transition: all 0.25s ease;
            border: 1px solid transparent;
            position: relative;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.02);
        }

        .nav-menu li a::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 168, 255, 0.1), transparent);
            transition: left 0.4s ease;
        }

        .nav-menu li a:hover::before {
            left: 100%;
        }

        .nav-menu li a:hover {
            background: rgba(0, 168, 255, 0.08);
            color: var(--accent-color);
            transform: translateX(6px);
            border-color: rgba(0, 168, 255, 0.3);
        }

        .nav-menu li a.active {
            background: linear-gradient(135deg, var(--accent-color), var(--purple-accent));
            color: white;
            transform: translateX(4px);
            box-shadow: 0 4px 15px rgba(0, 168, 255, 0.3);
        }

        .nav-menu li a.active:hover {
            transform: translateX(8px);
        }

        /* ICONOS EN EL MENÚ */
        .nav-menu li a .icon {
            font-size: var(--text-lg);
            margin-right: 12px;
            min-width: 20px;
            text-align: center;
        }

        /* SEPARADOR */
        .nav-separator {
            width: 70%;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--accent-color), transparent);
            margin: 20px auto;
            border-radius: 1px;
        }

        /* FOOTER DEL MENÚ MEJORADO */
        .nav-footer {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-top: 1px solid #374151;
        }

        .nav-footer-title {
            color: var(--text-color);
            font-size: var(--text-xs);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 12px;
            text-align: center;
            opacity: 0.8;
        }

        .nav-menu-legal-section {
            list-style: none;
            padding: 0 8px;
            margin: 0;
        }

        .nav-menu-legal-section li {
            margin-bottom: 4px;
        }

        .nav-menu-legal-section li a {
            font-size: var(--text-sm);
            padding: 10px 12px;
            font-weight: 500;
            color: var(--text-muted);
            background: rgba(255, 255, 255, 0.01);
            border-radius: 6px;
        }

        .nav-menu-legal-section li a:hover {
            color: var(--accent-color);
            background: rgba(0, 168, 255, 0.05);
            transform: translateX(3px);
            border-color: transparent;
        }

        .nav-menu-legal-section li a .icon {
            font-size: var(--text-base);
            margin-right: 8px;
        }

        /* OVERLAY */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(0,0,0,0.6);
            z-index: 1001;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            backdrop-filter: blur(2px);
        }
        .overlay.active { opacity: 1; visibility: visible; }

        /* CONTENIDO PRINCIPAL COMPACTO */
        .content {
            flex-grow: 1;
            padding: 8px 12px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            align-items: center;
            margin-top: 60px;
            margin-bottom: 8px;
        }

        .section {
            display: none;
            width: 100%;
            flex-direction: column;
            gap: 8px;
            align-items: center;
        }
        .section.active { display: flex; }

        .container {
            background: var(--secondary-bg);
            padding: 12px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid #374151;
            width: 100%;
            max-width: 450px;
        }

        /* === INICIO CAMBIO: CSS de banners eliminado === */
        /* Estilos de .admob-banner-container y relacionados han sido eliminados. */
        /* === FIN CAMBIO === */

        /* Estilos específicos para la sección de Política de Privacidad y Términos */
        #privacy-policy, #terms-and-conditions {
            background-color: var(--primary-bg);
            padding: 20px;
            text-align: left;
            max-width: 800px;
            border: 1px solid #374151;
            border-radius: 10px;
            margin-top: 8px;
            margin-bottom: 8px;
        }
        #privacy-policy h2, #privacy-policy h3,
        #terms-and-conditions h2, #terms-and-conditions h3 {
            color: var(--accent-color);
            margin-top: 20px;
            margin-bottom: 12px;
            font-size: var(--text-xl);
        }
        #privacy-policy p, #privacy-policy li,
        #terms-and-conditions p, #terms-and-conditions li {
            font-size: var(--text-sm);
            line-height: 1.6;
            margin-bottom: 10px;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }
        #privacy-policy ul, #terms-and-conditions ul {
            list-style-type: disc;
            margin-left: 20px;
            margin-bottom: 12px;
            font-size: var(--text-sm);
            color: var(--text-muted);
        }
        #privacy-policy li, #terms-and-conditions li {
            margin-bottom: 6px;
        }
        #privacy-policy a, #terms-and-conditions a {
            color: var(--gold-accent);
            text-decoration: underline;
        }

        h2 {
            font-weight: 700;
            color: var(--accent-color);
            margin-bottom: 6px;
            text-transform: uppercase;
            font-size: var(--text-lg);
            letter-spacing: 0.5px;
        }
        h2.weekly { color: var(--purple-accent); }
        h2.winners { color: var(--gold-accent); }
        h2.leaderboard-title { color: var(--green-accent); }

        p {
            margin-bottom: 4px;
            color: var(--text-muted);
            line-height: 1.4;
            font-size: var(--text-sm);
        }

        button {
            width: 100%;
            padding: 10px;
            font-size: var(--text-base);
            font-weight: 700;
            background: var(--accent-color);
            border: none;
            border-radius: 8px;
            color: var(--primary-bg);
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        button:hover:not(:disabled) {
            opacity: 0.9;
            transform: scale(1.02);
        }
        button:disabled {
            background-color: #555;
            cursor: not-allowed;
            opacity: 0.6;
        }

        #myProgress p {
            margin: 4px 0;
            font-size: var(--text-sm);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
        }

        #myPlayerId {
            color: var(--accent-color);
            cursor: pointer;
            font-weight: bold;
            font-size: var(--text-sm);
        }
        #myPlayerId:hover { text-decoration: underline; }

        .progress-container { margin-top: 8px; }
        #gameArea { background: var(--container-bg); }

        /* DISEÑO PROFESIONAL PARA GIROS - MÁS COMPACTO */
        .spins-section {
            background: linear-gradient(145deg, #1a2332, #0f1419);
            border: 2px solid var(--pass-color);
            border-radius: 8px;
            padding: 8px;
            margin-bottom: 8px;
            position: relative;
            overflow: hidden;
        }

        .spins-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(249, 115, 22, 0.1), transparent);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            50% { left: 100%; }
            100% { left: -100%; }
        }

        .spins-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 4px;
        }

        .spins-title {
            font-size: var(--text-base);
            font-weight: 700;
            color: var(--pass-color);
            margin: 0;
            text-transform: none;
            letter-spacing: normal;
        }

        .spins-count {
            background: linear-gradient(135deg, var(--pass-color), #ff8533);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-weight: 800;
            font-size: var(--text-base);
            box-shadow: 0 2px 8px rgba(249, 115, 22, 0.3);
            min-width: 60px;
            text-align: center;
        }

        .spins-info {
            font-size: var(--text-xs);
            color: var(--text-muted);
            text-align: center;
            margin: 0;
            opacity: 0.8;
        }

        .grid-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 6px;
            margin: 12px auto;
            max-width: 280px;
        }

        .grid-item {
            width: 100%;
            aspect-ratio: 1 / 1;
            background: #374151;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-weight: 800;
            transition: all 0.2s ease-in-out;
            font-size: var(--text-base);
            border: 2px solid transparent;
        }
        .grid-item span {
            font-size: var(--text-xs);
            opacity: 0.8;
            font-weight: 500;
            text-transform: uppercase;
            margin-top: 1px;
        }
        .grid-item.active {
            transform: scale(1.1);
            background: var(--accent-color);
            color: var(--primary-bg);
            box-shadow: 0 0 20px var(--accent-color);
            border-color: var(--accent-color);
        }
        .grid-item.winner {
            background: var(--green-accent);
            color: var(--primary-bg);
            transform: scale(1.15);
            box-shadow: 0 0 25px var(--green-accent);
            border-color: var(--green-accent);
        }

        .winner-card {
            background: var(--container-bg);
            border: 1px solid var(--gold-accent);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 8px;
            text-align: left;
        }
        .winner-card .date {
            font-size: var(--text-xs);
            color: var(--text-muted);
            margin-bottom: 4px;
        }
        .winner-card .prize {
            font-size: var(--text-base);
            color: var(--gold-accent);
            font-weight: 800;
            margin-bottom: 4px;
        }
        .winner-card .winner-id {
            font-size: var(--text-sm);
            color: var(--text-color);
        }

        #leaderboard table {
            width: 100%;
            border-collapse: collapse;
            text-align: left;
            font-size: var(--text-sm);
        }
        #leaderboard th, #leaderboard td {
            padding: 8px 6px;
            border-bottom: 1px solid #374151;
        }
        #leaderboard th {
            color: var(--accent-color);
            font-weight: 600;
            font-size: var(--text-sm);
        }
        #leaderboard-body tr:nth-child(odd) { background-color: #374151; }
        #leaderboard-body .my-rank { background-color: var(--pass-color) !important; font-weight: 800; }

        .mini-leaderboard-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 6px;
            font-size: var(--text-sm);
            border-bottom: 1px solid #2c3e50;
        }
        .mini-leaderboard-item:last-child { border-bottom: none; }
        .my-rank-highlight {
            background-color: rgba(249, 115, 22, 0.2);
            border-radius: 6px;
            font-weight: bold;
        }

        /* ESTILOS PARA ADMOB COMPLIANCE - MÁS COMPACTO */
        .consent-notice {
            background: linear-gradient(45deg, var(--purple-accent), var(--accent-color));
            color: white;
            padding: 10px;
            border-radius: 8px;
            margin: 8px 0;
            font-size: var(--text-sm);
            text-align: center;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .consent-notice h4 {
            margin: 0 0 6px 0;
            font-size: var(--text-base);
            font-weight: 700;
        }

        .consent-notice p {
            margin: 3px 0;
            color: rgba(255, 255, 255, 0.9);
            font-size: var(--text-sm);
        }

        /* ========================================
           SWEETALERT2 - ICONOS ESTÁTICOS PERSONALIZADOS
           ======================================== */

        /* SweetAlert2 - Tema personalizado para Diamantes Pro Players */
        .swal2-popup {
            background-color: var(--secondary-bg) !important;
            border-radius: 12px !important;
            border: 1px solid #374151 !important;
            padding: 1.5em !important;
            color: var(--text-color) !important;
            font-family: var(--font-main) !important;
        }

        .swal2-title {
            color: var(--text-color) !important;
            font-size: var(--text-xl) !important;
            font-weight: 700 !important;
            margin-bottom: 10px !important;
            text-align: center !important;
        }

        .swal2-html-container,
        .swal2-content,
        .swal2-text {
            color: var(--text-muted) !important;
            font-size: var(--text-base) !important;
            line-height: 1.5 !important;
            text-align: center !important;
        }

        /* Botones personalizados */
        .swal2-confirm,
        .swal2-cancel {
            border-radius: 8px !important;
            font-weight: 700 !important;
            padding: 12px 24px !important;
            margin: 5px !important;
            font-size: var(--text-base) !important;
            font-family: var(--font-main) !important;
            border: none !important;
            cursor: pointer !important;
            transition: all 0.2s ease !important;
        }

        .swal2-confirm {
            background-color: var(--accent-color) !important;
            color: white !important;
        }

        .swal2-confirm:hover {
            background-color: #0080d1 !important;
            transform: translateY(-1px) !important;
        }

        .swal2-cancel {
            background-color: #6c757d !important;
            color: white !important;
        }

        .swal2-cancel:hover {
            background-color: #5a6268 !important;
            transform: translateY(-1px) !important;
        }

        /* Input personalizado */
        .swal2-input {
            background-color: #1F2937 !important;
            border: 1px solid #4B5563 !important;
            color: var(--text-color) !important;
            height: 45px !important;
            font-size: var(--text-base) !important;
            border-radius: 8px !important;
            padding: 10px 15px !important;
            font-family: var(--font-main) !important;
        }

        .swal2-input:focus {
            border-color: var(--accent-color) !important;
            box-shadow: 0 0 0 3px rgba(0, 168, 255, 0.1) !important;
            outline: none !important;
        }

        .swal2-input[type=number] {
            -moz-appearance: textfield !important;
        }

        .swal2-input[type=number]::-webkit-outer-spin-button,
        .swal2-input[type=number]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        /* ICONOS ESTÁTICOS */
        .swal2-icon {
            width: 80px !important;
            height: 80px !important;
            margin: 20px auto 15px !important;
            border: none !important;
            background-color: transparent !important;
            position: relative !important;
            border-radius: 0 !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            animation: none !important;
            transform: none !important;
            font-size: 60px !important;
        }

        .swal2-icon *,
        .swal2-icon .swal2-icon-content,
        .swal2-icon .swal2-success-circular-line-left,
        .swal2-icon .swal2-success-circular-line-right,
        .swal2-icon .swal2-success-fix,
        .swal2-icon .swal2-success-ring,
        .swal2-icon .swal2-x-mark,
        .swal2-icon .swal2-x-mark-line-left,
        .swal2-icon .swal2-x-mark-line-right,
        .swal2-icon .swal2-warning-line,
        .swal2-icon .swal2-info-circle,
        .swal2-icon .swal2-question-mark {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
        }

        .swal2-icon::before {
            display: none !important;
        }

        .swal2-icon::after {
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            font-size: 60px !important;
            width: 100% !important;
            height: 100% !important;
            position: absolute !important;
            top: 0 !important;
            left: 0 !important;
            line-height: 1 !important;
        }

        /* ICONOS PERSONALIZADOS CON EMOJI */
        .swal2-icon.swal2-success::after { content: '✅' !important; }
        .swal2-icon.swal2-error::after { content: '❌' !important; }
        .swal2-icon.swal2-warning::after { content: '⚠️' !important; }
        .swal2-icon.swal2-info::after { content: 'ℹ️' !important; }
        .swal2-icon.swal2-question::after { content: '❓' !important; }

        .swal2-loading .swal2-icon {
            background: none !important;
            filter: none !important;
            animation: none !important;
        }

        .swal2-loading .swal2-icon::after {
            content: '⟳' !important;
            display: flex !important;
            font-size: 40px !important;
            color: var(--accent-color) !important;
            align-items: center !important;
            justify-content: center !important;
            position: absolute !important;
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: 100% !important;
            animation: swal2-rotate 1s linear infinite !important;
        }

        @keyframes swal2-rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .swal2-container {
            background-color: rgba(0, 0, 0, 0.8) !important;
            backdrop-filter: blur(3px) !important;
        }

        /* Responsive para móviles */
        @media (max-width: 480px) {
            .swal2-popup {
                width: calc(100vw - 40px) !important;
                margin: 20px !important;
                padding: 1.2em !important;
            }
            .swal2-title { font-size: var(--text-lg) !important; }
            .swal2-icon {
                width: 60px !important;
                height: 60px !important;
                margin: 15px auto 10px !important;
                font-size: 45px !important;
            }
            .swal2-icon::after { font-size: 45px !important; }
            .swal2-loading .swal2-icon::after { font-size: 30px !important; }
            .swal2-confirm,
            .swal2-cancel {
                padding: 10px 20px !important;
                font-size: var(--text-sm) !important;
            }
        }

        @media (max-width: 480px) {
            .header { padding: 0 15px; }
            .hamburger-menu {
                right: 15px !important;
                font-size: 26px !important;
                width: 40px !important;
                height: 40px !important;
            }
            .nav-menu {
                width: calc(100vw - 40px);
                max-width: 280px;
                left: -280px;
            }
            .nav-menu.active { left: 0; }
            .container { padding: 10px; }
            .content {
                padding: 6px 8px;
                gap: 6px;
            }
            .grid-container {
                max-width: 250px;
                gap: 4px;
                margin: 8px auto;
            }
            .spins-count {
                font-size: var(--text-sm);
                padding: 3px 8px;
                min-width: 50px;
            }
            .spins-section { padding: 6px; }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .hamburger-menu { right: 18px !important; }
        }

        @media (min-width: 769px) {
            .nav-menu { width: 280px; }
            .hamburger-menu { right: 25px !important; }
        }
    </style>
</head>
<body>
<header class="header">
    <span class="header-title">Club de Recompensas</span>
    <button class="hamburger-menu" id="hamburger-btn">☰</button>
</header>

<nav class="nav-menu" id="navMenu">
    <div class="nav-header">
        <h3>🎮 Club de Recompensas</h3>
        <p>Tu centro de premios favorito</p>
    </div>

    <div class="nav-content">
        <ul>
            <li>
                <a href="#home" class="nav-link active" data-section="home">
                    <span class="icon">🏠</span>
                    Inicio
                </a>
            </li>
            <li>
                <a href="#tasks" class="nav-link" data-section="tasks">
                    <span class="icon">📋</span>
                    Tareas
                </a>
            </li>
            <li>
                <a href="#leaderboard" class="nav-link" data-section="leaderboard">
                    <span class="icon">🏆</span>
                    Clasificación
                </a>
            </li>
            <li>
                <a href="#winners" class="nav-link" data-section="winners">
                    <span class="icon">🎉</span>
                    Ganadores
                </a>
            </li>
        </ul>
    </div>

    <div class="nav-separator"></div>

    <div class="nav-footer">
        <div class="nav-footer-title">Información Legal</div>
        <ul class="nav-menu-legal-section">
            <li>
                <a href="#privacy-policy" class="nav-link" data-section="privacy-policy">
                    Políticas de Privacidad
                </a>
            </li>
            <li>
                <a href="#terms-and-conditions" class="nav-link" data-section="terms-and-conditions">
                    Términos y Condiciones
                </a>
            </li>
        </ul>
    </div>
</nav>

<div class="overlay" id="overlay"></div>

<main class="content">
    <section id="home" class="section active">
        <div id="giveawayInfo" class="container">
            <h2 class="weekly">Sorteo Semanal</h2>
            <p>Premio: <strong>Pase Élite o 1,000 Diamantes 💎</strong></p>
            <p id="countdown-container" style="font-size: var(--text-base); font-weight:700; color: var(--text-color);">
                Termina en: <strong id="countdown">Cargando...</strong>
            </p>
        </div>

        <div id="myProgress" class="container">
            <p><span>ID de Jugador:</span> <span id="myPlayerId" class="editable-field">Toca para configurar ✏️</span></p>
            <hr style="border-color: #374151; margin: 6px 0;">
            <p><span>Mis Pases de Sorteo:</span> <span id="myPasses" style="color:var(--pass-color); font-size: var(--text-lg);">0</span></p>
            <p><span>Tickets Actuales:</span> <span id="myTickets" style="color:var(--gold-accent);">0</span></p>
            <div class="progress-container">
                <p class="progress-label" style="font-size: var(--text-xs); margin-bottom: 4px;">Meta Semanal 🎯: 1,000 Tickets</p>
                <div style="background: #374151; border-radius: 8px; padding: 3px;">
                    <div id="pass-progress" style="width: 0%; height: 12px; background: linear-gradient(90deg, var(--purple-accent), var(--accent-color)); border-radius: 5px; transition: width 0.5s ease-out; text-align: center; color: white; font-weight: bold; font-size: var(--text-xs); line-height: 12px;">0%</div>
                </div>
            </div>
        </div>

        <div id="gameArea" class="container">
            <h2>Gana Tickets</h2>

            <div class="grid-container" id="grid-container"></div>
            <button id="spin-button">🎟️ ¡GIRAR RULETA!</button>

            <div class="spins-section" style="margin-top: 8px;">
                <div class="spins-header">
                    <h3 class="spins-title">🎰 Giros Disponibles</h3>
                    <div class="spins-count" id="spins-available">0</div>
                </div>
                <p class="spins-info">Usa giros para jugar en la ruleta y ganar tickets</p>
            </div>

            <button id="get-spins-button" style="background: var(--gold-accent); margin-top: 8px; display: none;">
                📺 Ver Video para Giros (+10)
            </button>
        </div>

        <div id="mini-leaderboard" class="container" style="background-color: var(--container-bg);">
            <h2 style="font-size: var(--text-base); color: var(--green-accent);">Top 5 de la Semana</h2>
            <div id="mini-leaderboard-list"><p>Cargando clasificación...</p></div>
            <hr style="border-color: #374151; margin: 6px 0;">
            <div id="my-rank-status" class="mini-leaderboard-item"></div>
        </div>
    </section>

    <section id="tasks" class="section">
        <div class="container">
            <h2 style="color: var(--purple-accent);">Completa Tareas</h2>
            <p>Gana tickets extra para tener más oportunidades.</p>

            <div class="consent-notice">
                <h4>🎬 Videos Opcionales</h4>
                <p>Puedes ver videos publicitarios para ganar tickets adicionales.</p>
                <p><strong>Solo se mostrarán videos con tu consentimiento explícito.</strong></p>
                <p>Al hacer clic en "Ver Video" aceptas ver un anuncio a cambio de recompensas.</p>
            </div>

            <button id="task-button" style="background: var(--purple-accent); margin-top: 8px;">📺 Ver un Video (+20 Tickets)</button>
        </div>
    </section>

    <section id="leaderboard" class="section">
        <div class="container">
            <h2 class="leaderboard-title">🏆 Clasificación Semanal Completa</h2>
            <p>La tabla se actualiza en tiempo real. ¡Consigue más pases para ser el número 1!</p>
            <table>
                <thead><tr><th>#</th><th>ID Jugador</th><th>Pases</th><th>Tickets</th></tr></thead>
                <tbody id="leaderboard-body"></tbody>
            </table>
        </div>
    </section>

    <section id="winners" class="section">
        <div class="container">
            <h2 class="winners">🏆 Muro de la Fama 🏆</h2>
            <p>Aquí se mostrarán los 10 ganadores más recientes.</p>
            <div id="winners-list"></div>
        </div>
    </section>

    <section id="privacy-policy" class="section">
        <div class="container" style="text-align: left;">
            <h2>Política de Privacidad</h2>
            <div id="privacy-policy-content">
                <p>Esta Política de Privacidad describe cómo "Diamantes Pro Players" (en adelante, "la Aplicación", "Nosotros" o "El Desarrollador") recopila, usa y comparte su información personal en relación con su uso de nuestra aplicación móvil. Al usar la Aplicación, usted acepta la recopilación y el uso de información de acuerdo con esta política.</p>
                <h3>Descargo de Responsabilidad y Aviso de No Afiliación</h3>
                <p>
                    "Diamantes Pro Players" es una aplicación de recompensas y sorteos desarrollada de forma independiente por <strong>El Desarrollador de Diamantes Pro Players</strong>.
                    <strong>Esta Aplicación no está afiliada, respaldada, patrocinada ni específicamente aprobada por Garena, el desarrollador del juego Free Fire. Free Fire y su logotipo son marcas comerciales de Garena.</strong>
                    Todos los nombres de productos, logotipos, marcas y otras marcas comerciales que aparecen en esta Aplicación son propiedad de sus respectivos dueños.
                </p>
                <p>
                    Los premios ofrecidos en esta Aplicación (como Diamantes o Pases Élite de Free Fire) se adquieren directamente por "El Desarrollador" a través de tiendas en línea oficiales o autorizadas (como Pagostore) y se envían a los ID de jugador de los ganadores. La Aplicación actúa como un medio para organizar sorteos y distribuir estos premios, sin relación directa con la operación o el mantenimiento del juego Free Fire por parte de Garena.
                </p>
                <h3>1. Información que Recopilamos</h3>
                <p>Recopilamos dos tipos principales de información a través de la Aplicación:</p>
                <ul>
                    <li><strong>Información proporcionada por usted:</strong>
                        <ul>
                            <li><strong>ID de Jugador (Free Fire ID):</strong> Recopilamos el ID numérico de Free Fire que usted nos proporciona voluntariamente. Esta información es esencial para identificarlo en nuestro sistema, vincularle sus tickets y pases, gestionar su participación en sorteos y recompensarle con premios dentro del juego. Esta ID se almacena localmente en su dispositivo y en nuestra base de datos de Firebase.</li>
                        </ul>
                    </li>
                    <li><strong>Información recopilada automáticamente (a través de servicios de terceros):</strong>
                        <ul>
                            <li><strong>Datos de Uso y Dispositivo:</strong> Cuando usted usa la Aplicación, ciertos datos pueden ser recopilados automáticamente por nuestros proveedores de servicios de terceros. Esto puede incluir, entre otros: dirección IP, tipo de dispositivo móvil, identificadores únicos del dispositivo, información de la red móvil, información del sistema operativo, información sobre cómo y cuándo utiliza la Aplicación (por ejemplo, interacciones con anuncios).</li>
                        </ul>
                    </li>
                </ul>
                <h3>2. Cómo Usamos Su Información</h3>
                <p>Utilizamos la información recopilada para varios propósitos, incluyendo:</p>
                <ul>
                    <li>Para operar y mantener la Aplicación y sus funcionalidades (ruleta, tareas, seguimiento de tickets y pases).</li>
                    <li>Para identificarlo en clasificaciones y listas de ganadores, y para entregarle los premios que gane.</li>
                    <li>Para mejorar y personalizar su experiencia en la Aplicación.</li>
                    <li>Para comprender y analizar cómo utiliza la Aplicación, lo que nos ayuda a mejorar su rendimiento y características.</li>
                    <li>Para mostrar anuncios personalizados y no personalizados a través de nuestro servicio de publicidad.</li>
                    <li>Para cumplir con nuestras obligaciones legales y resolver cualquier disputa.</li>
                </ul>
                <h3>3. Compartiendo Su Información</h3>
                <p>Compartimos su información personal en las siguientes situaciones:</p>
                <ul>
                    <li><strong>Con Proveedores de Servicios de Terceros:</strong>
                        <ul>
                            <li><strong>Google Firebase:</strong> Utilizamos Firebase Realtime Database para almacenar y gestionar los ID de jugador, tickets, pases, datos de clasificación y registros de ganadores. Firebase puede recopilar datos de uso y rendimiento para sus propios servicios. Consulte la política de privacidad de Google (<a href="https://policies.google.com/privacy" target="_blank">policies.google.com/privacy</a>).</li>
                            <li><strong>Google AdMob:</strong> La Aplicación utiliza Google AdMob para mostrar anuncios. AdMob puede recopilar y utilizar datos como identificadores de dispositivos, información de ubicación, direcciones IP, cookies e información sobre su actividad en la Aplicación para proporcionar publicidad personalizada y no personalizada. Consulte la política de privacidad de AdMob (<a href="https://support.google.com/admob/answer/6128543" target="_blank">support.google.com/admob/answer/6128543</a>).</li>
                        </ul>
                    </li>
                    <li><strong>En Clasificaciones y Listas de Ganadores:</strong> Su ID de jugador (parcialmente enmascarada para proteger su privacidad, por ejemplo, "123**45") puede ser visible públicamente en las clasificaciones de la Aplicación y en la lista de ganadores, para reconocer a los participantes y a los premiados.</li>
                    <li><strong>Por Obligación Legal:</strong> Podemos divulgar su información si así lo exige la ley o en respuesta a solicitudes válidas de autoridades públicas.</li>
                </ul>
                <h3>4. Seguridad de los Datos</h3>
                <p>Nos esforzamos por proteger su información personal, pero ninguna transmisión por Internet o método de almacenamiento electrónico es 100% seguro. Si bien utilizamos medios comercialmente aceptables para proteger su información personal, no podemos garantizar su seguridad absoluta.</p>
                <h3>5. Retención de Datos</h3>
                <p>Retendremos su información personal solo durante el tiempo necesario para los fines establecidos en esta Política de Privacidad. Retendremos y utilizaremos su información en la medida necesaria para cumplir con nuestras obligaciones legales, resolver disputas y hacer cumplir nuestros acuerdos.</p>
                <h3>6. Privacidad de los Niños</h3>
                <p>Nuestra Aplicación no está dirigida a niños menores de 13 años. No recopilamos a sabiendas información de identificación personal de niños menores de 13 años. Si usted es padre o tutor y sabe que su hijo nos ha proporcionado datos personales, comuníquese con nosotros. Si descubrimos que un niño menor de 13 años nos ha proporcionado información personal, eliminaremos dicha información de nuestros servidores.</p>
                <p><strong>Nota importante para los padres/tutores:</strong> Dado que nuestra aplicación está relacionada con un juego popular entre diversas edades, se recomienda la supervisión parental si la aplicación es utilizada por menores.</p>
                <h3>7. Sus Derechos</h3>
                <p>Dependiendo de su ubicación, usted puede tener ciertos derechos sobre su información personal, como el derecho a acceder, corregir o eliminar los datos que tenemos sobre usted. Si desea ejercer alguno de estos derechos, por favor, póngase en contacto con nosotros.</p>
                <h3>8. Cambios en Esta Política de Privacidad</h3>
                <p>Podemos actualizar nuestra Política de Privacidad de vez en cuando. Le notificaremos cualquier cambio publicando la nueva Política de Privacidad en esta página. Se le aconseja revisar esta Política de Privacidad periódicamente para cualquier cambio. Los cambios en esta Política de Privacidad son efectivos cuando se publican en esta página.</p>
                <h3>9. Contáctenos</h3>
                <p>Si tiene alguna pregunta o sugerencia sobre nuestra Política de Privacidad, no dude en contactarnos a:</p>
                <p><strong>Correo electrónico:</strong> follgramerpay@gmail.com</p>
                <p><strong>Desarrollador:</strong> El Desarrollador de Diamantes Pro Players</p>
            </div>
        </div>
    </section>

    <section id="terms-and-conditions" class="section">
        <div class="container" style="text-align: left;">
            <h2>Términos y Condiciones</h2>
            <div id="terms-and-conditions-content">
                <h3>Aceptación de los Términos</h3>
                <p>Al acceder y utilizar la aplicación móvil "Diamantes Pro Players" (en adelante, "la Aplicación"), usted acepta estar obligado por estos Términos y Condiciones de Uso (en adelante, "Términos"). Si no está de acuerdo con alguna parte de estos Términos, no debe utilizar la Aplicación. Estos Términos constituyen un acuerdo legal vinculante entre usted y El Desarrollador de Diamantes Pro Players (en adelante, "El Desarrollador").</p>
                <h3>Descripción del Servicio</h3>
                <p>La Aplicación "Diamantes Pro Players" ofrece un sistema de recompensas y sorteos donde los usuarios pueden ganar "Tickets" mediante la interacción con una ruleta y la realización de ciertas "Tareas" (incluyendo la visualización opcional de anuncios). Estos Tickets pueden ser convertidos en "Pases de Sorteo", los cuales otorgan al usuario la oportunidad de participar en sorteos semanales para ganar premios relacionados con el juego Free Fire, como Diamantes y Pases Élite.</p>
                <h3>Registro de Cuenta y ID de Jugador</h3>
                <ul>
                    <li>Para participar en los sorteos y acumular recompensas, se le pedirá que proporcione su ID numérico de jugador de Free Fire. Usted es responsable de la exactitud de esta ID. El Desarrollador no se hace responsable de la pérdida de premios debido a un ID de jugador incorrecto o inválido proporcionado por el usuario.</li>
                    <li>Usted acepta que su ID de jugador (parcialmente enmascarada, por ejemplo, "123**45") puede aparecer públicamente en las tablas de clasificación y listas de ganadores dentro de la Aplicación.</li>
                </ul>
                <h3>Reglas de Uso y Conducta</h3>
                <ul>
                    <li>La Aplicación está destinada únicamente para uso personal y no comercial.</li>
                    <li>Queda estrictamente prohibido el uso de bots, scripts, emuladores con software de terceros, o cualquier método fraudulento o automatizado para acumular Tickets o Pases. Cualquier cuenta que se descubra utilizando dichos métodos será descalificada de los sorteos y sus Tickets y Pases podrán ser anulados sin previo aviso.</li>
                    <li>No debe intentar interferir con el funcionamiento de la Aplicación, ni intentar acceder a áreas o datos no autorizados.</li>
                </ul>
                <h3>Premios y Recompensas</h3>
                <ul>
                    <li>Los "Tickets" y "Pases de Sorteo" son monedas virtuales exclusivas de la Aplicación y no tienen ningún valor monetario real fuera de ella. No son transferibles ni canjeables por dinero en efectivo.</li>
                    <li>Los premios ofrecidos (Diamantes, Pases Élite, etc.) se adquieren directamente por El Desarrollador a través de tiendas en línea oficiales o autorizadas (como Pagostore) y se envían a los ID de jugador de los ganadores. La Aplicación actúa como un medio para organizar sorteos y distribuir estos premios, sin relación directa con la operación o el mantenimiento del juego Free Fire por parte de Garena.</li>
                    <li>La disponibilidad y la naturaleza de los premios, así como las reglas de los sorteos y la conversión de Tickets a Pases, pueden ser modificadas por El Desarrollador en cualquier momento sin previo aviso. Se hará lo posible por informar a los usuarios sobre cambios significativos.</li>
                    <li>La participación en los sorteos no garantiza la obtención de un premio. Los ganadores se seleccionan al azar entre los participantes elegibles.</li>
                </ul>
                <h3>Publicidad y Contenido de Terceros</h3>
                <ul>
                    <li>La Aplicación puede mostrar anuncios proporcionados por Google AdMob. La visualización de anuncios es completamente opcional y solo se muestra con el consentimiento explícito del usuario.</li>
                    <li>Los usuarios pueden optar por ver anuncios a cambio de recompensas adicionales (Tickets). Esta es una actividad completamente voluntaria.</li>
                    <li>El Desarrollador no se hace responsable por el contenido de los anuncios ni por las interacciones que usted pueda tener con ellos o con sitios web de terceros a los que pueda acceder a través de los anuncios.</li>
                </ul>
                <h3>Propiedad Intelectual</h3>
                <p>Todo el contenido, características y funcionalidades de la Aplicación (incluyendo, entre otros, texto, gráficos, logotipos, iconos, imágenes, compilaciones de datos y software) son propiedad de El Desarrollador o de sus licenciantes y están protegidos por leyes de derechos de autor, marcas comerciales y otras leyes de propiedad intelectual.</p>
                <h3>Descargo de Responsabilidad</h3>
                <p>LA APLICACIÓN SE PROPORCIONA "TAL CUAL" Y "SEGÚN DISPONIBILIDAD", SIN GARANTÍAS DE NINGÚN TIPO, EXPRESAS O IMPLÍCITAS. EL DESARROLLADOR NO GARANTIZA QUE LA APLICACIÓN FUNCIONE DE FORMA ININTERRUMPIDA O LIBRE DE ERRORES, QUE LOS DEFECTOS SERÁN CORREGIDOS, O QUE LA APLICACIÓN ESTÉ LIBRE DE VIRUS U OTROS COMPONENTES DAÑINOS. USTED UTILIZA LA APLICACIÓN BAJO SU PROPIO RIESGO.</p>
                <h3>Limitación de Responsabilidad</h3>
                <p>EN NINGÚN CASO EL DESARROLLADOR SERÁ RESPONSABLE POR DAÑOS INDIRECTOS, INCIDENTALES, ESPECIALES, CONSECUENTES O PUNITIVOS, INCLUYENDO, ENTRE OTROS, PÉRDIDA DE GANANCIAS, DATOS, USO O FONDO DE COMERCIO, RESULTANTES DE (I) SU ACCESO O USO O IMPOSIBILIDAD DE ACCESO O USO DE LA APLICACIÓN; (II) CUALQUIER CONDUCTA O CONTENIDO DE ТERCEROS EN LA APLICACIÓN; (III) CUALQUIER CONTENIDO OBTENIDO DE LA APLICACIÓN; Y (IV) EL ACCESO, USO O ALTERACIÓN NO AUTORIZADOS DE SUS TRANSMISIONES O CONTENIDO, YA SEA BASADO EN GARANTÍA, CONTRATO, AGRAVIO (INCLUIDA LA NEGLIGENCIA) O CUALQUIER OTRA TEORÍA LEGAL, HAYAMOS SIDO O NO INFORMADOS DE LA POSIBILIDAD DE DICHOS DAÑOS.</p>
                <h3>Modificaciones de los Términos</h3>
                <p>El Desarrollador se reserva el derecho, a su entera discreción, de modificar o reemplazar estos Términos en cualquier momento. Si una revisión es material, intentaremos proporcionar un aviso con al menos 30 días de anticipación antes de que los nuevos términos entren en vigencia. Lo que constituye un cambio material se determinará a nuestra entera discreción.</p>
                <h3>Terminación</h3>
                <p>Podemos terminar o suspender su acceso a la Aplicación inmediatamente, sin previo aviso ni responsabilidad, por cualquier motivo, incluyendo, sin limitación, si usted incumple estos Términos.</p>
                <h3>Ley Aplicable y Jurisdicción</h3>
                <p>Estos Términos se regirán e interpretarán de acuerdo con las leyes de Bolivia, sin tener en cuenta sus disposiciones sobre conflicto de leyes.</p>
                <h3>Contáctenos</h3>
                <p>Si tiene alguna pregunta sobre estos Términos y Condiciones, puede contactarnos:</p>
                <ul>
                    <li><strong>Por correo electrónico:</strong> follgramerpay@gmail.com</li>
                    <li><strong>Desarrollador:</strong> El Desarrollador de Diamantes Pro Players</li>
                </ul>
            </div>
        </div>
    </section>
</main>

<script>
    // Variables globales
    let spinning = false;
    const PASS_GOAL = 1000;
    let initialSpins = 10;
    let currentSpins = initialSpins;
    const spinsRewardedPerAd = 10;

    const GRID_ITEMS_DATA = [
        { value: 5, label: "tickets" }, { value: 1, label: "ticket" }, { value: 10, label: "tickets" },
        { value: 25, label: "tickets" }, { value: 20, label: "tickets" }, { value: 0, label: "nada" },
        { value: 50, label: "tickets" }, { value: 5, label: "tickets" }, { value: 15, label: "tickets" },
        { value: 1, label: "ticket" }, { value: 100, label: "tickets" }, { value: 20, label: "tickets" }
    ];

    const PROBABILITY_TABLE = [
        { value: 0, label: "nada", weight: 25 }, { value: 1, label: "ticket", weight: 20 },
        { value: 5, label: "tickets", weight: 18 }, { value: 10, label: "tickets", weight: 12 },
        { value: 15, label: "tickets", weight: 10 }, { value: 20, label: "tickets", weight: 7 },
        { value: 25, label: "tickets", weight: 5 }, { value: 50, label: "tickets", weight: 13 },
        { value: 100, label: "tickets", weight: 8 }
    ];

    const selectRandomPrize = () => {
        const totalWeight = PROBABILITY_TABLE.reduce((sum, item) => sum + item.weight, 0);
        let random = Math.random() * totalWeight;
        for (let item of PROBABILITY_TABLE) {
            random -= item.weight;
            if (random <= 0) { return item; }
        }
        return PROBABILITY_TABLE[0];
    };

    const shuffleArray = (array) => {
        const shuffled = [...array];
        for (let i = shuffled.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
        }
        return shuffled;
    };

    // Referencias a elementos del DOM
    const navMenu = document.getElementById('navMenu');
    const overlay = document.getElementById('overlay');
    const hamburgerBtn = document.getElementById('hamburger-btn');
    const sections = document.querySelectorAll('.section');
    const navLinks = document.querySelectorAll('.nav-link');
    const myPlayerIdEl = document.getElementById('myPlayerId');
    const spinButton = document.getElementById('spin-button');
    const taskButton = document.getElementById('task-button');
    const gridContainer = document.getElementById('grid-container');
    const leaderboardBody = document.getElementById('leaderboard-body');
    const miniList = document.getElementById('mini-leaderboard-list');
    const myRankStatus = document.getElementById('my-rank-status');
    const spinsAvailableEl = document.getElementById('spins-available');
    const getSpinsButton = document.getElementById('get-spins-button');

    // Funciones de navegación del menú
    const toggleMenu = () => {
        navMenu.classList.toggle('active');
        overlay.classList.toggle('active');
    };

    // === INICIO CAMBIO: Función showSection actualizada ===
    const showSection = (sectionId) => {
        if (sectionId !== 'home' && window.Android && window.Android.showInterstitialBeforeSection) {
            window.Android.showInterstitialBeforeSection(sectionId);
        }

        sections.forEach(s => s.classList.remove('active'));
        document.getElementById(sectionId).classList.add('active');
        navLinks.forEach(l => l.classList.remove('active'));
        document.querySelector(`.nav-link[data-section="${sectionId}"]`).classList.add('active');
        if (navMenu.classList.contains('active')) toggleMenu();

        // YA NO notificamos cambios de sección para banners
        console.log(`Sección cambiada a: ${sectionId}`);
    };
    // === FIN CAMBIO ===

    // **********************************************
    // FUNCIONES LLAMADAS DESDE KOTLIN (ANDROID)
    // **********************************************

    window.updateUserUI = (playerId, tickets, passes) => {
        console.log("JS: updateUserUI called with: ", { playerId, tickets, passes });
        if (playerId && playerId !== "null") {
            myPlayerIdEl.textContent = playerId;
            document.getElementById('myTickets').textContent = tickets.toLocaleString();
            document.getElementById('myPasses').textContent = passes.toLocaleString();
            const progress = Math.min(100, Math.floor((tickets / PASS_GOAL) * 100));
            const passProgressEl = document.getElementById('pass-progress');
            passProgressEl.style.width = `${progress}%`;
            passProgressEl.textContent = `${progress}%`;
        } else {
            myPlayerIdEl.innerHTML = 'Toca para configurar ✏️';
            document.getElementById('myTickets').textContent = '0';
            document.getElementById('myPasses').textContent = '0';
            const passProgressEl = document.getElementById('pass-progress');
            passProgressEl.style.width = `0%`;
            passProgressEl.textContent = `0%`;
        }
    };

    window.updateLeaderboard = (usersJson) => {
        console.log("JS: updateLeaderboard called.");
        const users = JSON.parse(usersJson);
        if (!leaderboardBody) return;
        const rankedUsers = users.filter(user => (user.passes || 0) > 0 || (user.tickets || 0) > 0);
        if (rankedUsers.length === 0) {
            leaderboardBody.innerHTML = '<tr><td colspan="4" style="text-align: center;">¡Sé el primero en la clasificación!</td></tr>';
            return;
        }
        leaderboardBody.innerHTML = '';
        const currentPlayerId = (window.Android && window.Android.getPlayerId()) || '';
        rankedUsers.slice(0, 50).forEach((user, index) => {
            const tr = document.createElement('tr');
            if (currentPlayerId && user.playerId === currentPlayerId) tr.className = 'my-rank';
            tr.innerHTML = `<td>#${index + 1}</td><td>${maskPlayerId(user.playerId, true)}</td><td>${(user.passes || 0).toLocaleString()}</td><td>${(user.tickets || 0).toLocaleString()}</td>`;
            leaderboardBody.appendChild(tr);
        });
    };

    window.updateMiniLeaderboard = (usersJson) => {
        console.log("JS: updateMiniLeaderboard called.");
        const users = JSON.parse(usersJson);
        if (!miniList || !myRankStatus) return;

        const rankedUsers = users.filter(user => (user.passes || 0) > 0 || (user.tickets || 0) > 0);
        miniList.innerHTML = rankedUsers.length ? '' : '<p>Aún no hay participantes con pases.</p>';
        rankedUsers.slice(0, 5).forEach((user, index) => {
            const item = document.createElement('div');
            item.className = 'mini-leaderboard-item';
            const currentPlayerId = (window.Android && window.Android.getPlayerId()) || '';
            if (currentPlayerId && user.playerId === currentPlayerId) {
                item.classList.add('my-rank-highlight');
            }
            item.innerHTML = `<span class="rank">#${index + 1}</span><span class="player-id">${maskPlayerId(user.playerId, true)}</span><span class="passes">${(user.passes || 0).toLocaleString()} Pases</span>`;
            miniList.appendChild(item);
        });

        if (window.Android && window.Android.getPlayerId() && window.Android.getPlayerId() !== "Toca para configurar ✏️" && window.Android.getPlayerId() !== "null") {
            const currentPlayerId = window.Android.getPlayerId();
            const currentUserTickets = parseInt(document.getElementById('myTickets').textContent.replace(/,/g, '')) || 0;
            const currentUserPasses = parseInt(document.getElementById('myPasses').textContent.replace(/,/g, '')) || 0;
            const myRankIndex = rankedUsers.findIndex(u => u.playerId === currentPlayerId);
            if (myRankIndex !== -1) {
                myRankStatus.innerHTML = `<span class="rank">#${myRankIndex + 1}</span><span class="player-id">Tú</span><span class="passes">${currentUserPasses.toLocaleString()} Pases</span>`;
                myRankStatus.classList.add('my-rank-highlight');
            } else {
                if (currentUserPasses === 0 && currentUserTickets === 0) {
                    myRankStatus.innerHTML = `<span class="rank">--</span><span class="player-id">Tú (Sin participar)</span><span class="passes">0 Pases</span>`;
                } else {
                    myRankStatus.innerHTML = `<span class="rank">--</span><span class="player-id">Tú (${currentUserTickets} tickets)</span><span class="passes">${currentUserPasses.toLocaleString()} Pases</span>`;
                }
                myRankStatus.classList.remove('my-rank-highlight');
            }
        } else {
            myRankStatus.innerHTML = `<span class="rank">--</span><span class="player-id">Configura tu ID</span><span class="passes">--</span>`;
            myRankStatus.classList.remove('my-rank-highlight');
        }
    };

    window.updateWinners = (winnersJson) => {
        console.log("JS: updateWinners called.");
        const winners = JSON.parse(winnersJson);
        const winnersList = document.getElementById('winners-list');
        if (!winnersList) return;
        winnersList.innerHTML = '';
        if (winners.length > 0) {
            winners.slice(0, 10).forEach((winner) => {
                const card = document.createElement('div');
                card.className = 'winner-card';
                const formattedDate = winner.date || new Date(winner.timestamp).toLocaleDateString('es-ES', {
                    year: 'numeric', month: 'long', day: 'numeric',
                    hour: '2-digit', minute: '2-digit'
                });
                card.innerHTML = `
                    <p class="date">Sorteo del ${formattedDate}</p>
                    <p class="prize">${winner.prize}</p>
                    <p class="winner-id">Ganador ID: ${maskPlayerId(winner.winnerId, false)}</p>
                `;
                winnersList.appendChild(card);
            });
        } else {
            winnersList.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 20px;">Aún no hay ganadores. ¡Podrías ser el primero!</p>';
        }
    };

    // **********************************************
    // FUNCIONES DE JAVASCRIPT DE LA APP
    // **********************************************

    // === INICIO CAMBIO: Funciones de banner eliminadas ===
    // La función `createAdMobBannerSilently` ha sido eliminada.
    // === FIN CAMBIO ===

    const updateSpinCountUI = () => {
        spinsAvailableEl.textContent = currentSpins.toLocaleString();
        if (currentSpins <= 0) {
            spinButton.disabled = true;
            spinButton.style.background = '#555';
            getSpinsButton.style.display = 'block';
        } else {
            spinButton.disabled = false;
            spinButton.style.background = 'var(--accent-color)';
            getSpinsButton.style.display = 'none';
        }
    };

    window.onSpinsRewarded = (spinsAdded) => {
        currentSpins += spinsAdded;
        updateSpinCountUI();
        Swal.fire({
            title: '🎉 ¡Giros Ganados!',
            text: `¡Has obtenido ${spinsAdded} giros adicionales!`,
            icon: 'success',
            timer: 2000,
            showConfirmButton: false
        });
        getSpinsButton.textContent = '📺 Ver Video para Giros (+10)';
        getSpinsButton.style.background = 'var(--gold-accent)';
        getSpinsButton.disabled = false;
    };

    const checkPlayerId = () => {
        const playerId = window.Android && window.Android.getPlayerId ? window.Android.getPlayerId() : null;
        return playerId && playerId !== "null" && playerId !== "Toca para configurar ✏️" && playerId.trim() !== "";
    };

    const showPlayerIdPrompt = () => {
        const currentId = window.Android && window.Android.getPlayerId ? window.Android.getPlayerId() : "";
        const displayCurrentId = (currentId && currentId !== "null" && currentId !== "Toca para configurar ✏️") ? currentId : "";
        Swal.fire({
            title: displayCurrentId ? 'Cambiar ID de Jugador' : 'Configura tu ID de Jugador',
            icon: displayCurrentId ? 'question' : 'info',
            html: `<p style="margin-bottom: 15px;">Para participar en sorteos y ganar premios, debes configurar tu ID de Free Fire.</p>` +
                (!displayCurrentId ? `<div style="background: var(--container-bg); padding: 10px; border-radius: 8px; margin-top: 10px; font-size: var(--text-sm); color: var(--text-muted);">Al ingresar tu ID y confirmar, aceptas nuestra <a href="#privacy-policy" onclick="window.showSection('privacy-policy'); Swal.close();" style="color: var(--gold-accent); text-decoration: underline;">Política de Privacidad</a> y nuestros <a href="#terms-and-conditions" onclick="window.showSection('terms-and-conditions'); Swal.close();" style="color: var(--gold-accent); text-decoration: underline;">Términos y Condiciones</a>.</div>` : ''),
            input: 'number',
            inputPlaceholder: 'Ingresa tu ID numérico',
            inputValue: displayCurrentId,
            confirmButtonText: displayCurrentId ? 'Cambiar ID' : 'Guardar ID',
            showCancelButton: true,
            cancelButtonText: 'Cancelar',
            preConfirm: () => {
                const newPlayerId = Swal.getInput().value;
                if (!newPlayerId || !/^\d{5,}$/.test(newPlayerId)) {
                    Swal.showValidationMessage('Por favor, ingresa un ID válido (mínimo 5 dígitos).');
                    return false;
                }
                return newPlayerId;
            }
        }).then((result) => {
            if (result.isConfirmed && window.Android) {
                const newPlayerId = result.value;
                if (displayCurrentId && displayCurrentId !== newPlayerId) {
                    Swal.fire({
                        title: '⚠️ Confirmar Cambio de ID', icon: 'warning',
                        html: `<p style="margin-bottom: 15px;"><strong>¿Estás seguro de cambiar tu ID?</strong></p><div style="background: #2a2a2a; padding: 15px; border-radius: 8px; margin: 10px 0;"><p style="margin: 5px 0;"><strong>ID Actual:</strong> <span style="color: #ff6b6b;">${displayCurrentId}</span></p><p style="margin: 5px 0;"><strong>Nueva ID:</strong> <span style="color: #51cf66;">${newPlayerId}</span></p></div><p style="color: #ffd43b; font-size: var(--text-sm); margin-top: 15px;"><strong>Nota:</strong> Se cargarán automáticamente los tickets asociados a la nueva ID.</p>`,
                        showCancelButton: true, confirmButtonText: 'Confirmar Cambio', cancelButtonText: 'Cancelar'
                    }).then((confirmResult) => {
                        if (confirmResult.isConfirmed) {
                            window.Android.savePlayerId(newPlayerId);
                            Swal.fire({ title: '✅ ID Cambiado Exitosamente', icon: 'success', html: `<p>Tu ID ha sido cambiado a: <strong style="color: #51cf66;">${newPlayerId}</strong></p><p style="color: #74c0fc; font-size: var(--text-sm); margin-top: 10px;">Los datos se están cargando automáticamente...</p>`, timer: 3000, showConfirmButton: false });
                        }
                    });
                } else if (!displayCurrentId) {
                    window.Android.savePlayerId(newPlayerId);
                    Swal.fire({ title: '✅ ID Configurado', icon: 'success', html: `<p>Tu ID <strong style="color: #51cf66;">${newPlayerId}</strong> ha sido configurado correctamente.</p><p style="color: #74c0fc; font-size: var(--text-sm); margin-top: 10px;">¡Ya puedes empezar a ganar tickets!</p>`, timer: 3000, showConfirmButton: false });
                }
            }
        });
    };

    const addTickets = (amount) => {
        if (window.Android && window.Android.addTickets) {
            window.Android.addTickets(amount);
        } else {
            Swal.fire('Error', 'La funcionalidad de tickets no está disponible.', 'error');
        }
    };

    const spinGrid = () => {
        if (spinning) return;
        if (!checkPlayerId()) {
            Swal.fire({
                title: 'ID de Jugador Requerido', text: 'Necesitas configurar tu ID de jugador antes de poder girar la ruleta.', icon: 'warning',
                confirmButtonText: 'Configurar ID', showCancelButton: true, cancelButtonText: 'Cancelar'
            }).then((result) => { if (result.isConfirmed) { showPlayerIdPrompt(); } });
            return;
        }
        if (currentSpins <= 0) {
            Swal.fire({
                title: '¡No tienes giros!', html: '<p>Necesitas giros para jugar. Puedes obtener más giros viendo un video.</p>', icon: 'warning',
                confirmButtonText: 'Ver Video para Giros', showCancelButton: true, cancelButtonText: 'Cancelar'
            }).then((result) => { if (result.isConfirmed) { requestSpinsByWatchingAd(); } });
            return;
        }
        currentSpins--;
        updateSpinCountUI();
        spinning = true;
        spinButton.textContent = 'GIRANDO...';
        spinButton.disabled = true;

        const gridItems = document.querySelectorAll('.grid-item');
        gridItems.forEach(item => item.classList.remove('active', 'winner'));
        const finalWinnerIndex = Math.floor(Math.random() * gridItems.length);
        const spinDuration = 2500, spinInterval = 120;
        let elapsed = 0, currentActiveIndex = -1;

        const spinAnimation = setInterval(() => {
            if (currentActiveIndex !== -1) gridItems[currentActiveIndex].classList.remove('active');
            let newRandomIndex;
            do { newRandomIndex = Math.floor(Math.random() * gridItems.length); } while (newRandomIndex === currentActiveIndex);
            gridItems[newRandomIndex].classList.add('active');
            currentActiveIndex = newRandomIndex;
            elapsed += spinInterval;

            if (elapsed >= spinDuration) {
                clearInterval(spinAnimation);
                gridItems.forEach(item => item.classList.remove('active'));
                gridItems[finalWinnerIndex].classList.add('winner');
                const winnerElement = gridItems[finalWinnerIndex];
                const winnerValue = parseInt(winnerElement.textContent);
                const winnerLabel = winnerElement.querySelector('span').textContent;
                setTimeout(() => {
                    if (winnerValue > 0) {
                        addTickets(winnerValue);
                        spinButton.textContent = `+${winnerValue} ${winnerLabel}! 🎉`;
                        spinButton.style.background = 'var(--green-accent)';
                    } else {
                        spinButton.textContent = '¡Mejor suerte la próxima! 😅';
                    }
                    setTimeout(() => {
                        spinButton.textContent = '🎟️ ¡GIRAR RULETA!';
                        if (currentSpins > 0) { spinButton.style.background = 'var(--accent-color)'; }
                    }, 2000);
                    spinning = false;
                    updateSpinCountUI();
                    gridItems.forEach(item => item.classList.remove('winner'));
                }, 1000);
            }
        }, spinInterval);
    };

    const requestSpinsByWatchingAd = () => {
        if (!checkPlayerId()) {
            Swal.fire({
                title: 'ID de Jugador Requerido', text: 'Necesitas configurar tu ID para ganar giros.', icon: 'warning',
                confirmButtonText: 'Configurar ID', showCancelButton: true, cancelButtonText: 'Cancelar'
            }).then((result) => { if (result.isConfirmed) { showPlayerIdPrompt(); } });
            return;
        }
        Swal.fire({
            title: '📺 Ver Video para Giros',
            html: `<div style="text-align: left; margin: 15px 0;"><p style="margin-bottom: 10px;"><strong>¿Deseas ver un video publicitario para obtener giros?</strong></p><ul style="color: var(--text-muted); font-size: var(--text-sm); margin-left: 20px;"><li>Recompensa: <strong style="color: var(--gold-accent);">+${spinsRewardedPerAd} Giros</strong></li><li>Duración aproximada: 15-30 segundos</li><li>Completamente opcional</li></ul><p style="margin-top: 15px; color: var(--accent-color); font-size: var(--text-sm); font-style: italic;">Al hacer clic en "Ver Video" das tu consentimiento para visualizar publicidad.</p></div>`,
            icon: 'question', showCancelButton: true, confirmButtonText: '📺 Ver Video', cancelButtonText: 'Cancelar',
            confirmButtonColor: '#F97316', cancelButtonColor: '#6c757d'
        }).then((result) => {
            if (result.isConfirmed) {
                if (window.Android && window.Android.requestRewardedAdForSpins) {
                    window.Android.requestRewardedAdForSpins(spinsRewardedPerAd);
                    getSpinsButton.textContent = 'Cargando video...';
                    getSpinsButton.disabled = true;
                    getSpinsButton.style.background = '#555';
                } else {
                    Swal.fire('Error', 'La funcionalidad de video no está disponible.', 'error');
                    getSpinsButton.textContent = '📺 Ver Video para Giros (+10)';
                    getSpinsButton.style.background = 'var(--gold-accent)';
                    getSpinsButton.disabled = false;
                }
            }
        });
    };

    const completeTask = () => {
        if (!checkPlayerId()) {
            Swal.fire({
                title: 'ID de Jugador Requerido', text: 'Necesitas configurar tu ID para completar tareas.', icon: 'warning',
                confirmButtonText: 'Configurar ID', showCancelButton: true, cancelButtonText: 'Cancelar'
            }).then((result) => { if (result.isConfirmed) { showPlayerIdPrompt(); } });
            return;
        }
        Swal.fire({
            title: '📺 Ver Video Publicitario',
            html: `<div style="text-align: left; margin: 15px 0;"><p style="margin-bottom: 10px;"><strong>¿Deseas ver un video publicitario?</strong></p><ul style="color: var(--text-muted); font-size: var(--text-sm); margin-left: 20px;"><li>Recompensa: <strong style="color: var(--gold-accent);">+20 Tickets</strong></li><li>Duración aproximada: 15-30 segundos</li><li>Completamente opcional</li></ul><p style="margin-top: 15px; color: var(--accent-color); font-size: var(--text-sm); font-style: italic;">Al hacer clic en "Ver Video" das tu consentimiento para visualizar publicidad.</p></div>`,
            icon: 'question', showCancelButton: true, confirmButtonText: '📺 Ver Video', cancelButtonText: 'Cancelar',
            confirmButtonColor: '#8B5CF6', cancelButtonColor: '#6c757d'
        }).then((result) => {
            if (result.isConfirmed) {
                if (window.Android && window.Android.requestRewardedAdForTask) {
                    window.Android.requestRewardedAdForTask(20);
                    taskButton.textContent = 'Cargando video...';
                    taskButton.disabled = true;
                    taskButton.style.background = '#555';
                } else {
                    Swal.fire('Error', 'La funcionalidad de video no está disponible.', 'error');
                }
            }
        });
    };

    const maskPlayerId = (id, shouldMask = true) => {
        if (!shouldMask) return id;
        return id && typeof id === 'string' && id.length >= 5 ? id.substring(0, 3) + '**' + id.substring(id.length - 2) : id;
    };

    const startWeeklyCountdown = () => {
        const countdownEl = document.getElementById('countdown');
        if (!countdownEl) return;
        const getNextSunday = () => {
            const now = new Date();
            const nextSunday = new Date(now);
            nextSunday.setDate(now.getDate() + (7 - now.getDay()) % 7);
            nextSunday.setHours(23, 59, 59, 999);
            return nextSunday;
        };
        const updateCountdown = () => {
            const diff = getNextSunday() - new Date();
            if (diff <= 0) {
                countdownEl.textContent = '¡Sorteo Finalizado!';
                return;
            }
            const days = Math.floor(diff / 86400000);
            const hours = Math.floor((diff % 86400000) / 3600000);
            const minutes = Math.floor((diff % 3600000) / 60000);
            countdownEl.textContent = `${days}d ${hours}h ${minutes}m`;
        };
        updateCountdown();
        setInterval(updateCountdown, 60000);
    };

    const initializeGrid = () => {
        if (!gridContainer) return;
        gridContainer.innerHTML = '';
        shuffleArray(GRID_ITEMS_DATA).forEach(item => {
            const gridItem = document.createElement('div');
            gridItem.className = 'grid-item';
            gridItem.innerHTML = `${item.value}<span>${item.label}</span>`;
            gridContainer.appendChild(gridItem);
        });
    };

    window.showSection = showSection;

    // === INICIO CAMBIO: `DOMContentLoaded` actualizado ===
    document.addEventListener('DOMContentLoaded', () => {
        // Event Listeners para la UI
        if (hamburgerBtn) hamburgerBtn.addEventListener('click', toggleMenu);
        if (overlay) overlay.addEventListener('click', toggleMenu);

        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                showSection(link.dataset.section);
            });
        });

        if (myPlayerIdEl) {
            myPlayerIdEl.addEventListener('click', () => {
                console.log("JS: myPlayerIdEl clicked!");
                showPlayerIdPrompt();
            });
        }

        if (spinButton) spinButton.addEventListener('click', spinGrid);
        if (taskButton) taskButton.addEventListener('click', completeTask);
        if (getSpinsButton) getSpinsButton.addEventListener('click', requestSpinsByWatchingAd);

        // ELIMINAR COMPLETAMENTE TODA LA LÓGICA DE BANNERS - NO MÁS BANNERS DINÁMICOS
        console.log("App iniciada sin banners dinámicos - solo banner inferior fijo");

        // Inicializar interfaz con datos de Android
        if (window.Android) {
            console.log("JS: Calling Android.getInitialData()");
            window.Android.getInitialData();
        } else {
            console.warn("JS: Android interface not found on DOMContentLoaded.");
        }

        startWeeklyCountdown();
        initializeGrid();
        updateSpinCountUI();
    });
    // === FIN CAMBIO ===

    if (typeof Swal !== 'undefined') {
        window.Swal = Swal.mixin({
            customClass: {
                popup: 'swal2-popup', title: 'swal2-title', htmlContainer: 'swal2-html-container',
                confirmButton: 'swal2-confirm', cancelButton: 'swal2-cancel', input: 'swal2-input'
            },
            buttonsStyling: false
        });
    }

    console.log("JS: All scripts loaded and ready.");

</script>
</body>
</html>